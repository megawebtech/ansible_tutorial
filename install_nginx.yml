---

-  name: "Install packages"
   hosts: 192.168.1.62
   become: true
   gather_facts: true
   tasks:
 
   - name: "Ensure that required packages are installed"
     apt:
       name:
         - vim
         - mc
         - ca-certificates
       state: present

   - name: "Ensure that required nginx"
     apt:
       name:
         - nginx
       state: present
 
   - name: "Restart nginx"
     service:
       name: nginx
       state: restarted
       enabled: yes

   - name: "Wait for port 82 to become open on the host, don't start checking for 10 seconds"
     wait_for:
       port: 82
       delay: 10

   - name: "show current ip"
     debug:
       msg: "http://{{ ansible_facts.all_ipv4_addresses[1] }}:82"
